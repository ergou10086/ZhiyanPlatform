# 任务提醒功能使用说明

## 功能位置

任务提醒模块位于**首页右侧边栏**，在"我的工作日历"下方。

## 功能说明

### 1. 自动加载
- 用户登录后自动加载即将到期的任务（未来7天内）
- 未登录用户不会触发加载

### 2. 显示内容
- **有任务时**：显示警告图标和任务数量，列出前3个任务
- **无任务时**：显示成功图标和"很棒！没有即将截止的任务"提示

### 3. 任务信息
每个任务显示：
- 任务标题
- 所属项目名称
- 截止日期（智能格式化）
  - 今天、明天
  - X天后
  - 逾期X天（红色高亮）

### 4. 交互功能
- **点击任务**：跳转到对应的项目详情页
- **查看更多**：如果有超过3个任务，可以点击查看全部

## API接口

### 后端接口
```
GET /zhiyan/api/projects/tasks/my-upcoming
```

**参数：**
- `days`: 未来天数（默认7天）
- `page`: 页码（默认0）
- `size`: 每页数量（默认10）

**响应示例：**
```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "content": [
      {
        "id": "123",
        "projectId": "456",
        "projectName": "项目名称",
        "title": "任务标题",
        "description": "任务描述",
        "dueDate": "2025-11-04",
        "priority": "HIGH",
        "priorityName": "高优先级",
        "isOverdue": false
      }
    ],
    "totalElements": 5
  }
}
```

### 前端调用
```javascript
import { taskAPI } from '@/api/task'

// 获取即将到期的任务
const response = await taskAPI.getMyUpcomingTasks(7, 0, 5)
```

## 视觉设计

### 状态样式
1. **有紧急任务**
   - 红色边框
   - 渐变背景
   - 警告图标

2. **无紧急任务**
   - 蓝色边框
   - 淡蓝背景
   - 成功图标

### 任务卡片
- 鼠标悬停：背景变化、边框高亮、向右移动
- 逾期任务：红色标签
- 即将到期：黄色标签

## 技术特点

1. **性能优化**：使用批量查询避免N+1问题
2. **用户体验**：人性化的日期显示
3. **错误处理**：优雅处理未登录和网络错误
4. **响应式设计**：适配不同屏幕尺寸

## 文件位置

**前端：**
- 组件：`zhiyan_front/src/components/RightSidebar.vue`
- API：`zhiyan_front/src/api/task.js`

**后端：**
- 控制器：`TaskController.java` → `getMyUpcomingTasks()`
- 服务：`TaskServiceImpl.java` → `getMyUpcomingTasks()`
- 仓库：`TaskRepository.java` → `findMyUpcomingTasks()`

---

**更新时间：** 2025-10-28  
**版本：** v1.0

