# 创建成果接口请求示例

## 接口信息

- **接口路径**: `POST /zhiyan/achievement/create`
- **服务端口**: `8093` (开发环境)
- **完整URL**: `http://localhost:8094/zhiyan/achievement/create`
- **Content-Type**: `application/json`
- **需要认证**: 是（需要JWT Token）

## 请求参数说明

### 必填字段

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| projectId | Long | 所属项目ID | 1981188046153977856 |
| title | String | 成果标题（1-200字符） | "基于深度学习的图像识别算法研究" |
| type | String | 成果类型 | "paper" |

### 可选字段

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| status | String | 成果状态（默认为draft） | "draft" / "published" / "under_review" / "obsolete" |
| abstractText | String | 摘要/描述（最多5000字符） | "本文提出了一种..." |
| detailData | Object | 详细信息JSON（支持自定义字段） | 见下方示例 |

### 成果类型 (type) 可选值

- `paper` - 论文
- `patent` - 专利
- `dataset` - 数据集
- `model` - 算法模型
- `report` - 报告
- `custom` - 自定义成果

### 成果状态 (status) 可选值

- `draft` - 草稿（默认）
- `under_review` - 审核中
- `published` - 已发布
- `obsolete` - 已过时

---

## 请求示例

### 1. 基础版本（最简示例）

最简单的请求，只包含必填字段：

```json
{
  "projectId": 1981188046153977856,
  "title": "基于深度学习的图像识别算法研究",
  "type": "paper"
}
```

### 2. 完整版本（推荐）

包含所有常用字段的完整请求：

```json
{
  "projectId": 1981188046153977856,
  "title": "基于深度学习的图像识别算法研究",
  "type": "paper",
  "status": "draft",
  "abstractText": "本文提出了一种基于深度学习的图像识别算法，通过改进卷积神经网络结构，在多个公开数据集上取得了显著的性能提升。实验结果表明，该算法在图像分类任务中的准确率达到了98.5%，超过了现有主流方法。",
  "detailData": {
    "authors": [
      "liliang",
      "pxl",
      "zjm"
    ],
    "title":"中午吃啥调研",
    "journal": "Nbture",
    "publishYear": 2025,
    "publishDate": "2025-03-15",
    "volume": "621",
    "issue": "7990"
  },
  "creatorId": "1981328826835275776"
}
```

### 3. 不同类型成果的示例

#### 论文 (paper)

```json
{
  "projectId": 1981188046153977856,
  "title": "基于深度学习的图像识别算法研究",
  "type": "paper",
  "status": "published",
  "abstractText": "本文提出了一种基于深度学习的图像识别算法...",
  "detailData": {
    "authors": ["张三", "李四"],
    "journal": "Nature",
    "doi": "10.1038/s41586-2025-01234-5",
    "publishYear": 2025,
    "publishDate": "2025-03-15",
    "volume": "621",
    "issue": "7990",
    "pages": "123-135",
    "keywords": ["深度学习", "图像识别"],
    "citationCount": 15,
    "impactFactor": 49.962
  }
}
```

#### 专利 (patent)

```json
{
  "projectId": 1981188046153977856,
  "title": "一种基于人工智能的智能识别系统",
  "type": "patent",
  "status": "under_review",
  "abstractText": "本发明涉及人工智能技术领域，具体公开了一种基于人工智能的智能识别系统...",
  "detailData": {
    "patentNo": "CN202510123456.7",
    "inventors": ["王五", "赵六"],
    "applicant": "某某大学",
    "applicationDate": "2025-01-15",
    "publicationDate": "2025-06-20",
    "patentType": "发明专利",
    "legalStatus": "实质审查",
    "ipcClass": "G06N3/04"
  }
}
```

#### 数据集 (dataset)

```json
{
  "projectId": 1981188046153977856,
  "title": "中文医疗对话数据集",
  "type": "dataset",
  "status": "published",
  "abstractText": "该数据集包含10万条中文医疗领域的对话数据，涵盖常见疾病咨询、用药指导等场景...",
  "detailData": {
    "version": "1.0",
    "format": "JSON",
    "size": "2.5GB",
    "recordCount": 100000,
    "license": "CC BY-NC 4.0",
    "downloadUrl": "https://example.com/dataset",
    "createdDate": "2025-02-01",
    "updateDate": "2025-02-15",
    "categories": ["医疗", "对话", "中文"],
    "description": "包含问诊、诊断、用药等多个场景"
  }
}
```

#### 算法模型 (model)

```json
{
  "projectId": 1981188046153977856,
  "title": "图像分类预训练模型 ResNet-50",
  "type": "model",
  "status": "published",
  "abstractText": "基于ImageNet数据集训练的ResNet-50图像分类模型，准确率达到76.15%...",
  "detailData": {
    "modelType": "深度神经网络",
    "framework": "PyTorch",
    "version": "2.0",
    "accuracy": 0.7615,
    "parameters": "25.6M",
    "modelSize": "98MB",
    "trainDataset": "ImageNet",
    "downloadUrl": "https://example.com/model.pth",
    "license": "Apache 2.0"
  }
}
```

#### 报告 (report)

```json
{
  "projectId": 1981188046153977856,
  "title": "2025年人工智能技术发展趋势研究报告",
  "type": "report",
  "status": "draft",
  "abstractText": "本报告系统分析了2025年人工智能技术的最新发展趋势...",
  "detailData": {
    "reportType": "技术研究报告",
    "authors": ["张三", "李四"],
    "submitDate": "2025-03-01",
    "pageCount": 50,
    "language": "中文",
    "organization": "某某研究院",
    "version": "1.0"
  }
}
```

---

## cURL 命令示例

### 基础请求

```bash
curl -X POST http://localhost:8094/zhiyan/achievement/create \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{
    "projectId": 1981188046153977856,
    "title": "基于深度学习的图像识别算法研究",
    "type": "paper"
  }'
```

### 完整请求

```bash
curl -X POST http://localhost:8094/zhiyan/achievement/create \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{
    "projectId": 1981188046153977856,
    "title": "基于深度学习的图像识别算法研究",
    "type": "paper",
    "status": "draft",
    "abstractText": "本文提出了一种基于深度学习的图像识别算法，通过改进卷积神经网络结构，在多个公开数据集上取得了显著的性能提升。",
    "detailData": {
      "authors": ["张三", "李四", "王五"],
      "journal": "Nature",
      "doi": "10.1038/s41586-2025-01234-5",
      "publishYear": 2025,
      "publishDate": "2025-03-15",
      "volume": "621",
      "issue": "7990",
      "pages": "123-135",
      "keywords": ["深度学习", "图像识别", "卷积神经网络"],
      "citationCount": 0,
      "impactFactor": 49.962
    }
  }'
```

---

## Postman/Apifox 配置

### 请求配置

1. **Method**: `POST`
2. **URL**: `http://localhost:8094/zhiyan/achievement/create`
3. **Headers**:
   ```
   Content-Type: application/json
   Authorization: Bearer YOUR_JWT_TOKEN
   ```
4. **Body** (raw JSON):
   ```json
   {
     "projectId": 1981188046153977856,
     "title": "基于深度学习的图像识别算法研究",
     "type": "paper",
     "status": "draft",
     "abstractText": "本文提出了一种基于深度学习的图像识别算法，通过改进卷积神经网络结构，在多个公开数据集上取得了显著的性能提升。",
     "detailData": {
       "authors": ["张三", "李四", "王五"],
       "journal": "Nature",
       "doi": "10.1038/s41586-2025-01234-5",
       "publishYear": 2025,
       "publishDate": "2025-03-15",
       "volume": "621",
       "issue": "7990",
       "pages": "123-135",
       "keywords": ["深度学习", "图像识别", "卷积神经网络"],
       "citationCount": 0,
       "impactFactor": 49.962
     }
   }
   ```

---

## 响应示例

### 成功响应（200 OK）

```json
{
  "code": 200,
  "msg": "成果创建成功",
  "data": {
    "id": 1981500000000000000,
    "projectId": 1981188046153977856,
    "title": "基于深度学习的图像识别算法研究",
    "type": "paper",
    "status": "draft",
    "creatorId": 1981328826835275776,
    "abstractText": "本文提出了一种基于深度学习的图像识别算法...",
    "detailData": {
      "authors": ["张三", "李四", "王五"],
      "journal": "Nature",
      "doi": "10.1038/s41586-2025-01234-5",
      "publishYear": 2025,
      "publishDate": "2025-03-15",
      "volume": "621",
      "issue": "7990",
      "pages": "123-135",
      "keywords": ["深度学习", "图像识别", "卷积神经网络"],
      "citationCount": 0,
      "impactFactor": 49.962
    },
    "createTime": "2025-10-23T10:30:00",
    "updateTime": "2025-10-23T10:30:00"
  }
}
```

### 错误响应示例

#### 缺少必填字段（400 Bad Request）

```json
{
  "code": 400,
  "msg": "成果标题不能为空",
  "data": null
}
```

#### 权限不足（403 Forbidden）

```json
{
  "code": 403,
  "msg": "无权访问该项目",
  "data": null
}
```

#### 未认证（401 Unauthorized）

```json
{
  "code": 401,
  "msg": "未登录或登录已过期",
  "data": null
}
```

---

## 注意事项

1. **认证要求**: 
   - 必须在请求头中携带有效的 JWT Token
   - Token 通过登录接口获取
   - Token 格式：`Authorization: Bearer <token>`

2. **权限要求**:
   - 用户必须是项目成员才能创建成果
   - 创建者ID会自动从JWT Token中获取，前端无需传递

3. **字段限制**:
   - `title`: 1-200 字符
   - `abstractText`: 最多 5000 字符
   - `detailData`: JSON 对象，支持任意自定义字段

4. **detailData 字段**:
   - 该字段完全自定义，可根据不同成果类型存储不同的信息
   - 建议为每种类型定义规范的字段结构
   - 存储为 JSON 格式，查询时会自动解析

5. **状态管理**:
   - 默认创建时状态为 `draft`（草稿）
   - 可通过更新状态接口修改为其他状态

---

## 相关接口

创建成果后，您可能还需要：

1. **上传成果文件**: `POST /zhiyan/achievement/file/upload`
2. **更新成果信息**: `PATCH /zhiyan/achievement/{achievementId}`
3. **更新成果状态**: `PATCH /zhiyan/achievement/{achievementId}/status`
4. **查询成果详情**: `GET /zhiyan/achievement/{achievementId}`
5. **删除成果**: `DELETE /zhiyan/achievement/{achievementId}`

---

## 开发环境配置

- **服务名称**: zhiyan-knowledge
- **端口**: 8094
- **数据库**: zhiyan_knowledge_db
- **注册中心**: Nacos (localhost:8848)

## 生产环境注意

生产环境请替换为实际的服务地址和端口，具体配置请参考 `application-prod.yml`。

