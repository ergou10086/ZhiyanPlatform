# 主配置文件—通用配置

spring:
  application:
    name: zhiyan-ai-dify

  profiles:
    # 默认使用dev环境，可通过环境变量覆盖
    active: cloud

  # WebFlux 流式响应优化配置
  codec:
    max-in-memory-size: 524288  # 512 KB（足够处理SSE消息，同时不会过度缓冲）
  
  # Netty 服务器配置
  netty:
    leak-detection: simple  # 内存泄漏检测

# 通用日志配置
logging:
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n"